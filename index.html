<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MNPOLL Winter 2018: Trump</title>
  	<meta name="description" content="MNPOLL Winter 2018: Trump">
 	<meta name="author" content="Frey Hargarten - StarTribune">
	<meta name="generator" content="BBEdit 10.5" />
	
	<link rel="stylesheet" href="./builds/development/css/style.css">

	<style type="text/css">

	#wrapper {
		font-family:"Benton Sans Condensed Medium";
		margin-right:auto;
		margin-left:auto;
		width:520px;
	}

	.chart svg {
	    text-align:center;
	    height:300px !important;
	    max-height:300px !important;
	}

	.chart {
	    text-align:center;
	    height:300px !important;
	    margin-left: auto;
	    margin-right: auto;
	    max-height:300px !important;
	}

	.powerline {
	    stroke-dasharray: 5, 5;
	    stroke: #333;
	}

	.chart .c3-line {
	  stroke-width: 6px !important;
	}

	.dataframe { 
		height:2900px;
	} 

	#bigResults {
	    text-align: center;
	    width: 100%;
	    margin: 20px;
	}

	.chatter {
		font-size:1.2em;
	}

	.chartTitle {
		font-size:1.4em;
	}

	#breakdowns {
		font-size:1.2em;
	}

	.byline {
	    font-family: "Benton Sans", Helvetica, Arial, sans-serif;
	    font-weight: 400;
	    font-size:0.6em;
	    color: #888;
	    padding-top:10px;
	    padding-bottom:10px;
	    text-align:left;
	}

	.byline a {
		color: #888;
	}
	
	.result {
	    display: inline-block !important;
	    text-align: center;
	    margin: 20px;
	    width: 112px;
	}

	.catIcon {
		display:inline-block;
		width:40%;
		margin:15px;
		text-align:center;
	}

	.bigNum {
	    font-size: 3em;
	    font-family: "Benton Sans" !important;
	    text-align: center;
	    font-weight: 900;
	    padding-top: 15px;
	    padding-left: 15px;
	    padding-right: 15px;
	    padding-bottom: 5px;
	}

	.forNum {
	    color: #00222D;
	}

	.againstNum {
	    color: rgb(115, 115, 115);
	}

	.question, .chatter, #breakdowns {
		line-height:160%;
	}

	.wrapper-dropdown-1 {
		padding-right:60px;
	}

	.main {
		line-height:120%
	}

	.downloadButton9 {
	    font-family: "Benton Sans",Helvetica,Arial,sans-serif;
	    font-weight: bold;
	    color: #333333;
	    border: none;
	    font-size: .9em;
	    text-align: center;
	    margin-top: 14px;
	    margin-left: 1%;
	    padding-top: 0px;
	    width: 99%;
	    background-color: #fff;
	    color: #333;
/*	    background-image: url(./builds/development/img/downloadDoc.svg);*/
	    background-size: 18px 18px;
	    background-repeat: no-repeat;
	    background-position: 42% 76%;
	}

	.downloadButton9:hover {
	    background-color: #fff !important;
	    opacity: .5;
	    cursor: pointer;
	}

	#selector { 
		display:block !important ;
	}

	.c3-tooltip {
		width:150px !important;
	}

	.wrapper-dropdown-1 {
   		 background: #dddddd !important!;
    }

    .green4 { fill:#8b62a8; background-color:#8b62a8 !important; }

	@media (max-width:520px) {
		#wrapper {
			width:100%;
		}
		.result {
			width:35% !important;
		}
	}

	@media only screen and (min-width: 200px) and (max-width: 767px) { 
		.dataframe { 
			height:2860px; 
		}
	}
	</style>
</head>
<!-- 420758934 -->
<body>
	<div id="wrapper">
	<div id="questions_list">
		<div class="questionBlock section" id="question1">
			<div class="question">Do you <span class="legendary gray5">approve</span> or <span class="legendary gray3">disapprove</span> of Donald Trump’s job performance as president?</div>
			<div class="bigResults">
				<div class="result">
				  <div class="bigNum forNum"><span class="for">45</span>%</div>
				  <div class="stat forLabel">approve</div>
				</div>
				<div class="result">
				  <div class="bigNum againstNum"><span class="against">47</span>%</div>
				  <div class="stat againstLabel">disapprove</div>
				</div>
			</div>

			<div id="supportBox1" class="sectionBox">
			  <div class="chartTitle">A deep partisan divide</div>
			  <div class="chatter"><span class="legendary r3">Republicans</span> have far more favorable views of President Trump's job performance than <span class="legendary d4">Democrats</span> and <span class="legendary green4">independents</span>.</div>
			 <div id="partyChart" class="chart"></div>
			</div>

			<div id="supportBox2" class="sectionBox">
			  <div class="chartTitle">An educational divide</div>
			  <div class="chatter">About half of those <span class="legendary purple2">without college degrees</span> approve of President Trump's job performance, while less than half of those <span class="legendary purple5">with college degrees</span> approve.</div>
			 <div id="eduChart" class="chart"></div>
			</div>
		</div>

		<div class="breaker"></div>

		<div class="questionBlock section" id="question2">
			<div class="question">Would you say Donald Trump <span class="legendary gray5">has the right temperament</span> to be president, or <span class="legendary gray3">not</span>?</div>
			<div class="bigResults">
				<div class="result">
				  <div class="bigNum forNum"><span class="for">36</span>%</div>
				  <div class="stat forLabel">yes</div>
				</div>
				<div class="result">
				  <div class="bigNum againstNum"><span class="against">58</span>%</div>
				  <div class="stat againstLabel">no</div>
				</div>
			</div>
		</div>

		<div class="questionBlock section" id="question3">
			<div class="question">Do you think Donald Trump <span class="legendary gray5">generally speaks the truth</span>, or <span class="legendary gray3">not</span>?</div>
			<div class="bigResults">
				<div class="result">
				  <div class="bigNum forNum"><span class="for">42</span>%</div>
				  <div class="stat forLabel">yes</div>
				</div>
				<div class="result">
				  <div class="bigNum againstNum"><span class="against">53</span>%</div>
				  <div class="stat againstLabel">no</div>
				</div>
			</div>

		</div>

		<div class="breaker"></div>

		<div class="questionBlock section" id="question4">
			<div class="question">Do you <span class="legendary gray5">approve</span> or <span class="legendary gray3">disapprove</span> of the way Donald Trump is handling North Korea?</div>
			<div class="bigResults">
				<div class="result">
				  <div class="bigNum forNum"><span class="for">42</span>%</div>
				  <div class="stat forLabel">approve</div>
				</div>
				<div class="result">
				  <div class="bigNum againstNum"><span class="against">47</span>%</div>
				  <div class="stat againstLabel">disapprove</div>
				</div>
			</div>
		</div>

		<div class="breaker"></div>

		<div class="questionBlock section" id="question5">
			<div class="question">Do you <span class="legendary gray5">approve</span> or <span class="legendary gray3">disapprove</span> of the way Donald Trump is handling the economy and jobs?</div>
			<div class="bigResults">
				<div class="result">
				  <div class="bigNum forNum"><span class="for">54</span>%</div>
				  <div class="stat forLabel">approve</div>
				</div>
				<div class="result">
				  <div class="bigNum againstNum"><span class="against">39</span>%</div>
				  <div class="stat againstLabel">disapprove</div>
				</div>
			</div>

			<div id="supportBox3" class="sectionBox">
			  <div class="chartTitle">A good economy boosts Trump</div>
			  <div class="chatter">A majority of <span class="legendary r3">Republicans</span> and <span class="legendary green4">independents</span> approve of President Trump's handling of the economy, while <span class="legendary d4">Democrats</span> strongly disapprove.</div>
			 <div id="econChart" class="chart"></div>
			</div>
		</div>

		<div class="breaker"></div>

	</div>

	<div class="breaker" style="border-bottom:3px solid #000; width:100%; margin:0;"></div>

	<div class="section" id="breakdowns">
		<div id="exploreLayer" class="chartTitle" style="text-align:center; padding:10px">Explore the data</div>
		<div style="padding:10px;">Select a question to see a breakdown on the answers across parties, geography and demographics.</div>

		<div id="viewSwitch">
		<div id="selector">
		  <section class="main">
		        <div class="wrapper-demo">
		          <div id="dd" class="wrapper-dropdown-1" tabindex="1">
		            <span>Do you approve or disapprove of Donald Trump’s job performance as president?</span>
		              <ul class="dropdown months" tabindex="1">
				        <li class="thisSwitch"><a href="#" data="trump1">Do you approve or disapprove of Donald Trump’s job performance as president?</a></li>
				        <li class="thisSwitch"><a href="#" data="trump2">Would you say Donald Trump has the right temperament to be president, or not?</a></li>
				        <li class="thisSwitch"><a href="#" data="trump3">Do you think Donald Trump generally speaks the truth, or not?</a></li>
				        <li class="thisSwitch"><a href="#" data="trump4">Do you approve or disapprove of the way Donald Trump is handling North Korea?</a></li>
				        <li class="thisSwitch"><a href="#" data="trump5">Do you approve or disapprove of the way Donald Trump is handling the economy and jobs?</a></li>
		              </ul>
		          </div>
		        ​</div>
		</section>
		</div>
		</div>

	    <div id="results" class="embed"><iframe id="dataframe" class="dataframe" src="./builds/development/?poll=trump1" border="0" frameborder="0" scrolling="no" width="100%" height="2900"></iframe></div>

	    <div class="byline">Source: Star Tribune Minnesota Poll | Graphic by <a href="http://www.startribune.com/jeff-hargarten/274254381/" target="new_">Jeff Hargarten, Star Tribune</a><!--  | <a href="./builds/production/data/maindata.xlsx" target="new_">Download Data</a></div> -->
	</div>
</div>
</body>

<script src="//code.jquery.com/jquery-latest.js"></script>
<script src="./builds/development/js/c3.min.js"></script>
<script src="./builds/development/js/d3.v3.min.js"></script>

<script>
	$.urlParam = function(name) {
	    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
	    if (results != null) {
	        return results[1] || 0;
	    } else {
	        return null;
	    }
	}

	var selected = $.urlParam('section');

	if (selected != null) {
	    $(".section").hide();
	    $("#" + selected).show();
	} else {
	    $(".section").show();
	}

	$(".thisSwitch").on("click", function() {
	    $("#dataframe").attr("src", "./builds/development/?poll=" + $(this).find("a").attr("data"));
	});


	//party breakdown chart
	function partyChart() {

	    var padding = {
	        top: 20,
	        right: 60,
	        bottom: 20,
	        left: 40,
	    };

	    var chartPopD = c3.generate({
	        bindto: "#partyChart",
	        padding: padding,
	        data: {
	            columns: [
	                ['DEM', .04],
	                ['GOP', .89],
	                ['IND', .46]
	            ],
	            type: 'bar',
	            labels: {
	                format: {
	                    'DEM': d3.format('%'),
	                    'GOP': d3.format('%'),
	                    'IND': d3.format('%')
	                }
	            }
	        },
	        legend: {
	            show: false
	        },
	        bar: {
	            width: {
	                ratio: 0.6
	            }
	        },
	        tooltip: {
	            show: false
	        },
	        color: {
	            pattern: ['#3585BC', '#d34A44', "#8b62a8"]
	        },
	        axis: {
	            // rotated: true,
	            y: {
	                max: 1,
	                min: 0,
	                padding: {
	                    bottom: 0,
	                    top: 0
	                },
	                tick: {
	                    count: 4,
	                    values: [0, 0.25, 0.50, 0.75, 1],
	                    format: d3.format('%')
	                }
	            },
	            x: {
	                type: 'category',
	                categories: ['% Approve']
	            }
	        },
	        grid: {
	            y: {
	                lines: [{
	                    value: 0.5,
	                    text: '',
	                    position: 'start',
	                    class: 'powerline'
	                }]
	            }
	        }

	    });

	    d3.selectAll(".c3-target-DEM")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(-10, 0)");

	    d3.selectAll(".c3-target-IND")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(10, 0)");

	}

	partyChart();


	//party breakdown chart
	function eduChart() {

	    var padding = {
	        top: 20,
	        right: 60,
	        bottom: 20,
	        left: 40,
	    };

	    var chartPopD = c3.generate({
	        bindto: "#eduChart",
	        padding: padding,
	        data: {
	            columns: [
	                ['NONE', .51],
	                ['DEGREE', .39]
	            ],
	            type: 'bar',
	            labels: {
	                format: {
	                    'NONE': d3.format('%'),
	                    'DEGREE': d3.format('%')
	                }
	            }
	        },
	        legend: {
	            show: false
	        },
	        bar: {
	            width: {
	                ratio: 0.6
	            }
	        },
	        tooltip: {
	            show: false
	        },
	        color: {
	            pattern: ['#865f67', '#4c1926']
	        },
	        axis: {
	            // rotated: true,
	            y: {
	                max: 1,
	                min: 0,
	                padding: {
	                    bottom: 0,
	                    top: 0
	                },
	                tick: {
	                    count: 4,
	                    values: [0, 0.25, 0.50, 0.75, 1],
	                    format: d3.format('%')
	                }
	            },
	            x: {
	                type: 'category',
	                categories: ['% Approve']
	            }
	        },
	        grid: {
	            y: {
	                lines: [{
	                    value: 0.5,
	                    text: '',
	                    position: 'start',
	                    class: 'powerline'
	                }]
	            }
	        }

	    });

	    d3.selectAll(".c3-target-NONE")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(-10, 0)");

	    d3.selectAll(".c3-target-DEGREE")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(10, 0)");

	}

	eduChart();

	//econ breakdown chart
	function econChart() {

	    var padding = {
	        top: 20,
	        right: 60,
	        bottom: 20,
	        left: 40,
	    };

	    var chartPopD = c3.generate({
	        bindto: "#econChart",
	        padding: padding,
	        data: {
	            columns: [
	                ['DEM', .09],
	                ['GOP', .92],
	                ['IND', .63]
	            ],
	            type: 'bar',
	            labels: {
	                format: {
	                    'DEM': d3.format('%'),
	                    'GOP': d3.format('%'),
	                    'IND': d3.format('%')
	                }
	            }
	        },
	        legend: {
	            show: false
	        },
	        bar: {
	            width: {
	                ratio: 0.6
	            }
	        },
	        tooltip: {
	            show: false
	        },
	        color: {
	            pattern: ['#3585BC', '#d34A44', "#8b62a8"]
	        },
	        axis: {
	            // rotated: true,
	            y: {
	                max: 1,
	                min: 0,
	                padding: {
	                    bottom: 0,
	                    top: 0
	                },
	                tick: {
	                    count: 4,
	                    values: [0, 0.25, 0.50, 0.75, 1],
	                    format: d3.format('%')
	                }
	            },
	            x: {
	                type: 'category',
	                categories: ['% Approve']
	            }
	        },
	        grid: {
	            y: {
	                lines: [{
	                    value: 0.5,
	                    text: '',
	                    position: 'start',
	                    class: 'powerline'
	                }]
	            }
	        }

	    });

	    d3.selectAll(".c3-target-DEM")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(-10, 0)");

	    d3.selectAll(".c3-target-IND")
	        .selectAll(".c3-bar, .c3-texts")
	        .attr("transform", "translate(10, 0)");

	}

	econChart();

	function DropDown(el) {
	    this.dd = el;
	    this.placeholder = this.dd.children('span');
	    this.opts = this.dd.find('ul.dropdown > li');
	    this.val = '';
	    this.index = -1;
	    this.initEvents();
	}
	DropDown.prototype = {
	    initEvents: function() {
	        var obj = this;

	        obj.dd.on('click', function(event) {
	            $(this).toggleClass('active');
	            return false;
	        });

	        obj.opts.on('click', function() {
	            var opt = $(this);
	            obj.val = opt.text();
	            obj.index = opt.index();
	            obj.placeholder.text(obj.val);
	        });
	    },
	    getValue: function() {
	        return this.val;
	    },
	    getIndex: function() {
	        return this.index;
	    }
	}

	$(function() {

	    var dd = new DropDown($('#dd'));
	    var dd2 = new DropDown($('#ddY'));

	    $(document).click(function() {
	        // all dropdowns
	        $('.wrapper-dropdown-1').removeClass('active');
	    });

	});

</script>
</html>