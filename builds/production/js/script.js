!function e(a,l,n){function r(t,u){if(!l[t]){if(!a[t]){var o="function"==typeof require&&require;if(!u&&o)return o(t,!0);if(s)return s(t,!0);throw new Error("Cannot find module '"+t+"'")}var c=l[t]={exports:{}};a[t][0].call(c.exports,function(e){var l=a[t][1][e];return r(l||e)},c,c.exports,e,a,l,n)}return l[t].exports}for(var s="function"==typeof require&&require,t=0;t<n.length;t++)r(n[t]);return r}({1:[function(e,a,l){d3.json("./data/polls.json",function(e,a){function l(e,a){return d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).rollup(function(e){return e.length}).entries(data).length}function n(e,a){for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&$(a).html("<div class='question'>"+data[i].question+"</div")}function r(e,a){var l="";for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&("null"!=data[i].answer1&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer1+"</div>"),"null"!=data[i].answer2&&(l+="<div class='legendBlock' style='background-color:"+colors[1]+"'></div> <div class='legendText'>"+data[i].answer2+"</div>"),"null"!=data[i].answer3&&(l+="<div class='legendBlock' style='background-color:"+colors[2]+"'></div> <div class='legendText'>"+data[i].answer3+"</div>"),"null"!=data[i].answer4&&(l+="<div class='legendBlock' style='background-color:"+colors[3]+"'></div> <div class='legendText'>"+data[i].answer4+"</div>"),"null"!=data[i].answer5&&(l+="<div class='legendBlock' style='background-color:"+colors[4]+"'></div> <div class='legendText'>"+data[i].answer5+"</div>"),"null"!=data[i].answer6&&(l+="<div class='legendBlock' style='background-color:"+colors[5]+"'></div> <div class='legendText'>"+data[i].answer6+"</div>"),"null"!=data[i].answer7&&(l+="<div class='legendBlock' style='background-color:"+colors[6]+"'></div> <div class='legendText'>"+data[i].answer7+"</div>"),"null"!=data[i].answer8&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer8+"</div>"),"null"!=data[i].answer9&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer9+"</div>"),"null"!=data[i].answer10&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer10+"</div>"),"null"!=data[i].answer11&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer11+"</div>"),"null"!=data[i].answer12&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer12+"</div>"));$(".legendBox").html(l)}function s(e,a){$(a).append("<div class='icon'><img src='img/"+e.toLowerCase()+".png' /></div><div class='category'>"+e+"</div>")}function t(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=r[1].values[0],t=e+"_"+n;$(l).append("<div rel='"+a+"' id='"+t+"' class='chartLabel'>"+a+"</div>"),$(l).append("<div rel='"+a+"' id='"+t+"' class='chart'><svg></svg></div>");var u;nv.addGraph(function(){u=nv.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:10,right:20,bottom:15,left:20}).color(colors).stacked(!0).showValues(!1).showLegend(!1).showControls(!1),u.yAxis.tickFormat(d3.format("%")),d3.select("#"+t+" svg").datum(c).transition().duration(500).call(u),nv.utils.windowResize(u.update);var e=$(document);e.width();return u});var o=$("#chartBox");o.width();if("null"!=s.answer12)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]},{key:s.answer12,values:[{label:a,value:Number(s.answer12_pct)}]}];else if("null"!=s.answer11)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]}];else if("null"!=s.answer10)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]}];else if("null"!=s.answer9)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]}];else if("null"!=s.answer8)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]}];else if("null"!=s.answer7)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]}];else if("null"!=s.answer6)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]}];else if("null"!=s.answer5)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]}];else if("null"!=s.answer4)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]}];else var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]}]}function u(e){var a,l,n=0,r=0;for(i=0;i<data.length;i++)if(data[i].tag==e&&"Total"==data[i].demographic){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer2_pct);a=data[i].answer1,l=data[i].answer2}$(".forLabel").html(""+a),$(".againstLabel").html(""+l),$({countNum:$(".for").text()}).animate({countNum:Math.round(n)},{duration:1e3,easing:"linear",step:function(){$(".for").text(Math.floor(this.countNum))},complete:function(){$(".for").text(this.countNum)}}),$({countNum:$(".for").text()}).animate({countNum:Math.round(r)},{duration:1e3,easing:"linear",step:function(){$(".against").text(Math.floor(this.countNum))},complete:function(){$(".against").text(this.countNum)}})}function o(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=e+"_"+n+"Table";$(l).append("<div rel='"+a+"' id='"+s+"' class='table'></div>");var t=d3.select("#"+s).append("table"),u=t.append("thead"),o=t.append("tbody"),c=[],i=[],v=r[1].values[0],w=[];w[0]=null,c[0]="Category","null"!=v.answer1&&(c[1]=v.answer1),"null"!=v.answer2&&(c[2]=v.answer2),"null"!=v.answer3&&(c[3]=v.answer3),"null"!=v.answer4&&(c[4]=v.answer4),"null"!=v.answer5&&(c[5]=v.answer5),"null"!=v.answer6&&(c[6]=v.answer6),"null"!=v.answer7&&(c[7]=v.answer7),"null"!=v.answer8&&(c[8]=v.answer8),"null"!=v.answer9&&(c[9]=v.answer9),"null"!=v.answer10&&(c[10]=v.answer10),"null"!=v.answer11&&(c[11]=v.answer11),"null"!=v.answer12&&(c[12]=v.answer12),i[0]=a,"null"!=v.answer1&&(i[1]=v.answer1_pct),"null"!=v.answer2&&(i[2]=v.answer2_pct),"null"!=v.answer3&&(i[3]=v.answer3_pct),"null"!=v.answer4&&(i[4]=v.answer4_pct),"null"!=v.answer5&&(i[5]=v.answer5_pct),"null"!=v.answer6&&(i[6]=v.answer6_pct),"null"!=v.answer7&&(i[7]=v.answer7_pct),"null"!=v.answer8&&(i[8]=v.answer8_pct),"null"!=v.answer9&&(i[9]=v.answer9_pct),"null"!=v.answer10&&(i[10]=v.answer10_pct),"null"!=v.answer11&&(i[11]=v.answer11_pct),"null"!=v.answer12&&(i[12]=v.answer12_pct),"Age 18-34"!=a&&"< $50,000"!=a&&"Men"!=a&&"Democrat"!=a&&"Hennepin & Ramsey"!=a&&"High School/Some College"!=a||u.append("tr").attr("class","headers").selectAll("th").data(c).enter().append("th").text(function(e){return e});var d=o.selectAll("tr").data(w).enter().append("tr");d.selectAll("td").data(i).enter().append("td").text(function(e){return isNaN(e)?e:d3.format("%")(e)});$(s+" .headers:not(:first)").hide()}data=a.polls;var c=window.location.href,v=/poll=([^&]+)/.exec(c)[1],w=v||"test",d="test";d3.select(".dropdown").selectAll(".list").data(data).enter().append("div").attr("class","list").html(function(e){if(e.tag!=d)return d=e.tag,"<a href='index.html?poll='"+e.tag+" class='loadLink'><li class='card' data='"+e.tag+"''>"+e.year+" | "+e.question+"</li></a>"}),$(document).ready(function(){$(".loadLink").each(function(){$(this).attr("href","index.html?poll="+$(this).find("li").attr("data"))}),$(".loadLink").click(function(){window.location.href=$(this).attr("href")})}),colors=["#000000","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"];var b=w;!function(e,a,c,i){$(a).html(""),$(c).html(""),$(i).html(""),n(e,"#question"),l(e,"Total")>1&&t(e,"Total",a,0),(l(e,"Democrat")>1||l(e,"Republican")>1)&&s("Party",c),l(e,"Democrat")>1&&(t(e,"Democrat",c,1),o(e,"Democrat",c,1)),l(e,"Republican")>1&&(t(e,"Republican",c,2),o(e,"Republican",c,2)),l(e,"Independent")>1&&(t(e,"Independent",c,3),o(e,"Independent",c,3)),l(e,"Other/None")>1&&(t(e,"Other/None",c,4),o(e,"Other/None",c,4)),l(e,"Trump voters")>1&&s("Voters",c),l(e,"Trump voters")>1&&(t(e,"Trump voters",c,26),o(e,"Trump voters",c,26)),l(e,"Clinton voters")>1&&(t(e,"Clinton voters",c,27),o(e,"Clinton voters",c,27)),l(e,"Other/Did not vote")>1&&(t(e,"Other/Did not vote",c,28),o(e,"Other/Did not vote",c,28)),l(e,"Men")>1&&s("Gender",c),l(e,"Men")>1&&(t(e,"Men",c,5),o(e,"Men",c,5)),l(e,"Women")>1&&(t(e,"Women",c,6),o(e,"Women",c,6)),l(e,"Hennepin & Ramsey")>1&&s("Region",c),l(e,"Hennepin & Ramsey")>1&&(t(e,"Hennepin & Ramsey",c,9),o(e,"Hennepin & Ramsey",c,9)),l(e,"Metro Suburbs")>1&&(t(e,"Metro Suburbs",c,10),o(e,"Metro Suburbs",c,10)),l(e,"Rest of State")>1&&(t(e,"Rest of State",c,11),o(e,"Rest of State",c,11)),l(e,"Northern Minnesota")>1&&(t(e,"Northern Minnesota",c,22),o(e,"Northern Minnesota",c,22)),l(e,"Southern Minnesota")>1&&(t(e,"Southern Minnesota",c,23),o(e,"Southern Minnesota",c,23)),l(e,"< $50,000")>1&&s("Income",i),l(e,"< $50,000")>1&&(t(e,"< $50,000",i,7),o(e,"< $50,000",i,7)),l(e,"> $50,000")>1&&(t(e,"> $50,000",i,8),o(e,"> $50,000",i,8)),l(e,"Age 18-34")>1&&s("Age",i),l(e,"Age 18-34")>1&&(t(e,"Age 18-34",i,12),o(e,"Age 18-34",i,12)),l(e,"Age 35-49")>1&&(t(e,"Age 35-49",i,13),o(e,"Age 35-49",i,13)),l(e,"Age 50-64")>1&&(t(e,"Age 50-64",i,14),o(e,"Age 50-64",i,14)),l(e,"Age 65+")>1&&(t(e,"Age 65+",i,15),o(e,"Age 65+",i,15)),l(e,"White")>1&&s("Race",c),l(e,"White")>1&&(t(e,"White",c,16),o(e,"White",c,16)),l(e,"Black")>1&&(t(e,"Black",c,17),o(e,"Black",c,17)),l(e,"Hispanic")>1&&(t(e,"Hispanic",c,18),o(e,"Hispanic",c,18)),l(e,"Asian")>1&&(t(e,"Asian",c,19),o(e,"Asian",c,19)),l(e,"Native")>1&&(t(e,"Native",c,20),o(e,"Native",c,20)),l(e,"Other")>1&&(t(e,"Other",c,21),o(e,"Other",c,21)),l(e,"High School/Some College")>1&&s("Education",i),l(e,"High School/Some College")>1&&(t(e,"High School/Some College",i,24),o(e,"High School/Some College",i,24)),l(e,"College Graduate")>1&&(t(e,"College Graduate",i,25),o(e,"College Graduate",i,25)),u(e),r(e,"#legendBox")}(b,"#chartBox0","#chartBox1","#chartBox2"),$(".switchIcon").on("click",function(){$(".switchIcon").removeClass("thisView"),$(this).addClass("thisView"),$(".chart, .chartLabel, .table").hide(),$("."+$(this).attr("view")).show(),"chart"==$(this).attr("view")&&$(".chartLabel").show(),$("#chartBox0 .chart").show(),$("#chartBox0 .chartLabel").show()})})},{}]},{},[1]);